使用 UV 添加依赖时，有多种方式来处理版本问题，让我为你详细介绍：

## 🔍 **查看包的最新版本**

### 1. **使用 UV 直接查看包信息**
```bash
# 查看包的详细信息和版本
uv tree --package pytest-mock

# 或者使用 pip show（在 uv 环境中）
uv run pip show pytest-mock
```

### 2. **在线查询最新版本**
```bash
# 使用 curl 查询 PyPI API
curl -s https://pypi.org/pypi/pytest-mock/json | grep '"version"' | head -1

# 或者访问 PyPI 网站
# https://pypi.org/project/pytest-mock/
```

## 📦 **UV 添加依赖的版本策略**

### 1. **不指定版本（推荐）**
```bash
# UV 会自动选择最新稳定版本
uv add pytest-mock

# 添加到特定组
uv add --group test pytest-mock
```

### 2. **灵活的版本约束**
```bash
# 大于等于某个版本（推荐）
uv add "pytest-mock>=3.0.0"

# 兼容版本（只允许补丁更新）
uv add "pytest-mock~=3.12.0"  # 允许 3.12.x

# 范围版本
uv add "pytest-mock>=3.0.0,<4.0.0"
```

### 3. **精确版本（不推荐，除非必要）**
```bash
# 固定到具体版本
uv add "pytest-mock==3.12.0"
```

## 🎯 **最佳实践流程**

### **方法 1：先查看再添加**
```bash
# 1. 搜索包信息
pip search pytest-mock  # 或在 PyPI 网站查看

# 2. 添加最新版本
uv add pytest-mock  # UV 自动选择最新稳定版

# 3. 查看实际安装的版本
uv run pip show pytest-mock
```

### **方法 2：使用版本约束（推荐）**
```bash
# 使用 >= 约束，获得最新版本但保证兼容性
uv add --group test "pytest-mock>=3.0.0"

# UV 会选择 >= 3.0.0 的最新版本
```

### **方法 3：先添加再查看**
```bash
# 1. 直接添加（UV 选择最新版）
uv add --group api faker

# 2. 查看安装的版本
uv run python -c "import faker; print(f'Faker version: {faker.__version__}')"

# 3. 如果需要，手动调整版本约束
# 编辑 pyproject.toml 或重新运行 uv add
```

## 📋 **实际示例**

假设你要添加几个常用的测试依赖：

```bash
# 1. 添加测试依赖（UV 自动选择最新稳定版）
uv add --group test pytest-mock pytest-asyncio pytest-timeout

# 2. 查看安装的版本
uv run pip list | grep pytest

# 3. 如果想要更保守的版本约束，可以重新添加
uv add --group test "pytest-mock>=3.0.0" "pytest-asyncio>=0.21.0"
```

## 🔧 **版本约束语法参考**

```bash
# 精确版本
uv add "package==1.2.3"

# 最小版本
uv add "package>=1.2.0"

# 兼容版本（推荐）
uv add "package~=1.2.0"    # 相当于 >=1.2.0, <1.3.0

# 范围版本
uv add "package>=1.2.0,<2.0.0"

# 排除特定版本
uv add "package>=1.2.0,!=1.3.0"
```

## 💡 **推荐策略**

1. **日常开发**：直接使用 `uv add package`，让 UV 选择最新稳定版
2. **生产环境**：使用版本约束如 `package>=x.y.0` 确保兼容性
3. **有问题时**：查看 `uv.lock` 文件中的具体版本，必要时手动指定

你可以先试试直接 `uv add package`，UV 会帮你选择合适的最新版本！